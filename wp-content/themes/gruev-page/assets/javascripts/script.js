// Generated by CoffeeScript 1.10.0
$(function() {
  var $body, $document, ValidMe;
  $body = $('body');
  $document = $(document);
  ValidMe = (function() {
    function ValidMe() {}

    ValidMe.prototype.init = function() {
      return this.listeners();
    };

    ValidMe.prototype.listeners = function() {
      var self;
      self = this;
      $document.on('submit', '.cf', function(e) {
        return self.submitForm(e, this);
      });
      $document.on('keydown', '.cf input, .cf textarea', function() {
        return self.removeError(this);
      });
      return $document.on('change', '.cf #file', function() {
        return self.uploadFile(this);
      });
    };

    ValidMe.prototype.submitForm = function(e, form) {
      var submitBtn;
      e.preventDefault();
      submitBtn = $(form).find('button[type="submit"]');
      if (this.validateForm(form) === false) {
        return false;
      }
      return submitBtn.attr('disabled', 'disabled');
    };

    ValidMe.prototype.validateForm = function(form) {
      var inputs, valid;
      inputs = $(form).find('input:not(.novalid), textarea:not(.novalid)');
      valid = true;
      inputs.each(function(idx, el) {
        var input, val;
        input = $(el);
        val = input.val();
        if (val.length === 0) {
          input.addClass('has-error').removeClass('has-success');
          valid = false;
        } else {
          return input.addClass('has-success').removeClass('has-error');
        }
      });
      return valid;
    };

    ValidMe.prototype.removeError = function(inp) {
      return $(inp).removeClass('has-error');
    };

    ValidMe.prototype.uploadFile = function(el) {
      var label, text;
      el = $(el);
      label = el.parent();
      text = el.siblings('.file-text');
      if (el[0].files.length) {
        label.addClass('active');
        return text.text('Attached file ...');
      } else {
        label.removeClass('active');
        return text.text('Upload file');
      }
    };

    return ValidMe;

  })();
  return $('.cont-connect').magnificPopup({
    type: 'ajax',
    callbacks: {
      open: function() {
        var validation;
        validation = new ValidMe;
        return validation.init();
      }
    }
  });
});
